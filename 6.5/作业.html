<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!-- 一. 说一下JS代码执行流程，预解析做了什么？ -->
    <!-- JavaScript代码的执行分为两个阶段：解析阶段和执行阶段。

在解析阶段，JavaScript引擎会进行词法分析和语法分析，生成抽象语法树（AST）和执行上下文。在这个阶段，JavaScript引擎会对整个代码进行预处理，包括以下几个过程：

标识符的预处理：JavaScript引擎会扫描整个代码，找出所有的变量和函数声明，并将它们存储到执行上下文中。

函数声明的预处理：如果代码中有函数声明，JavaScript引擎会在预处理阶段将这些函数声明提前，并将它们存储到执行上下文中。

变量声明的预处理：JavaScript引擎会将所有变量声明提前，并将它们初始化为undefined。

在执行阶段，JavaScript引擎会按照代码的顺序一行一行地执行代码。在执行代码的过程中，JavaScript引擎会根据执行上下文中存储的变量和函数声明来执行代码。

需要注意的是，JavaScript中的函数是一等公民，具有特殊的作用域规则。在函数执行的过程中，会生成一个新的执行上下文，并将该执行上下文压入执行上下文栈中。

总之，预解析的主要作用是在代码执行之前对代码进行预处理，将变量和函数声明提前，并初始化变量的值。这样可以确保在执行代码的过程中，变量和函数都已经被正确地声明和初始化。 -->

<!-- 二. 什么是执行上下文，执行上下文有什么作用？ -->
<!-- 执行上下文是 JavaScript 运行环境中的一个概念，用于描述代码被执行时所在的环境和条件。每当 JavaScript 代码开始执行时，都会创建一个执行上下文。执行上下文包含了一些重要的信息，如变量、函数、参数、作用域链等，这些信息决定了代码的执行结果。

执行上下文有三种类型：

全局执行上下文：当 JavaScript 代码开始执行时，会首先创建全局执行上下文。全局执行上下文是整个程序的基础，它默认存在，包含了所有的全局变量和函数。

函数执行上下文：当函数被调用时，会创建一个函数执行上下文。每个函数都有自己的执行上下文，用于管理函数内部的变量和函数。

eval 执行上下文：当使用 eval() 函数执行代码时，会创建一个 eval 执行上下文。eval 执行上下文与函数执行上下文类似，但有一些不同的规则。

执行上下文的作用可以总结为：

管理变量和函数：执行上下文在创建时会建立一个变量环境，用于存储当前上下文中定义的变量和函数，以及它们的值或引用。

管理作用域链：在执行上下文创建后，会建立一个作用域链，用于查找变量和函数。作用域链的顶端是当前执行上下文的变量环境，然后逐级向上查找外部环境，直到全局环境。

确定 this 值：在执行上下文创建时，会确定 this 的值，this 的值取决于函数的调用方式。

提供错误处理机制：如果在执行上下文中出现错误，JavaScript 引擎会将错误信息保存在执行上下文中，并通过执行上下文来进行错误处理。

总之，执行上下文是 JavaScript 代码执行的环境，它管理着变量、函数、作用域链和 this 值等信息，确保代码的正确执行。 -->

<!-- 三. 说一下，什么是作用域链，你是怎么理解作用域链的 -->
<!-- 作用域链是 JavaScript 中非常重要的概念，它是由多个执行上下文的变量环境组成的链式结构，用于查找变量和函数。

当 JavaScript 引擎在当前执行上下文中查找变量或函数时，如果当前上下文中没有定义该变量或函数，引擎会沿着作用域链向上查找，直到找到该变量或函数为止。如果在全局执行上下文中仍然没有找到，则引擎会报出“未定义”的错误。

作用域链的形成过程可以简单描述为：

在当前执行上下文中创建一个变量环境。

将变量环境的外部环境设置为外部执行上下文的变量环境。

重复步骤 2 直到全局执行上下文，形成完整的作用域链。

例如，当执行一个函数时，会创建一个新的执行上下文，并在该执行上下文中创建一个变量环境。当访问函数内部的变量时，JavaScript
引擎首先会在该执行上下文的变量环境中查找。如果未找到该变量，则会在该执行上下文的外部环境中查找，直到找到该变量或到全局执行上下文为止。

对于作用域链的理解，我认为它是一种嵌套的结构，每个执行上下文都有自己的变量环境和外部环境，这些环境通过链式关系连接起来。作用域链的形成过程是由 JavaScript 引擎在代码执行前进行的，它决定了代码中变量和函数的可见范围和访问权限，是
JavaScript 语言中非常重要的概念。 -->


<script>
    var n = 100;

    function fn() {
        console.log(n);  //100
    }

    function gn() {
        var n = 200;
        console.log(n); //200
        fn()
    }
    gn()
    console.log(n);  //100
</script>
</body>
</html>